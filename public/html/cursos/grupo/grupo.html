<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Grupo</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.1.1/css/all.css"
      integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/home">Home</a></li>
        <li class="breadcrumb-item"><a href="/cursos">Cursos</a></li>
        <li class="breadcrumb-item" aria-current="page" id="groupNameLink">
          Curso
        </li>
      </ol>
    </nav>
    <div class="px-3">
      <div class="d-flex justify-content-between">
        <h4><u id="groupCode"></u></h4>
      </div>
      <h3 id="groupStudentsLink" class="mt-5">
        <u>
          <a id="studentsLink" class="font-weight-normal text-dark"
            >Participantes</a
          >
        </u>
      </h3>
      <hr />
      <p class="display-4" id="groupName"></p>
      <hr />

      <div class="container">
        <strong>Información del curso</strong>
        <p id="groupDescription"></p>
      </div>

      <h3 class="mt-5">
        <u>
          <a
            href="/cursos/1/tareas"
            id="assignmentsLink"
            class="font-weight-normal text-dark"
            >Tareas</a
          >
        </u>
      </h3>
      <hr />

      <div id="assignments" class="container">
        <div class="card my-5 p-3">
          <h5>Nombre de la tarea</h5>
          <p>Fecha de entrega: 2023/05/12</p>
          <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit.
            Consequatur, accusantium veniam delectus sit nihil est totam minus
            reprehenderit possimus voluptate! Debitis deserunt inventore
            consequuntur similique nostrum distinctio illo saepe animi
            temporibus, dolorem architecto expedita. Sequi.
          </p>
          <div class="d-flex justify-content-end column">
            <a href="/cursos/1/tareas/1" class="btn btn-outline-primary">
              <i class="fas fa-envelope"></i> Entregar
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="../../../js/Request/index.js"></script>
    <script src="../../../js/api/groupsapi.js"></script>
    <script>
      async function loadGroup() {
        let url = window.location.href,
          partesURL = url.split("/"),
          codigo = partesURL[partesURL.length - 1];
        let response = await GroupsAPI.getGroup(codigo);
        if (response.status == 200) {
          let group = await response.json();
          groupCode.innerText = group.code;
          groupName.innerText = group.title;
          groupDescription.innerText = group.information;
          groupNameLink.innerText = group.title;
          studentsLink.href = `/cursos/${group.uid}/participantes`;
        } else if (response.status == 400) {
          alert("Ha ocurrido un error. Intenta más tarde");
          window.location.replace("/home");
        } else {
          window.location.replace("/");
        }
      }
      loadGroup();
    </script>
  </body>
</html>
